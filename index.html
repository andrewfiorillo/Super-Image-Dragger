<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

	<title>Super Image Dragger</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	
	<style type="text/css">
		body {
			font-family: Helvetica Neue, Helvetica, Arial, Sans-serif;
			color: #333;
		}
		a {
			text-decoration: none;
			color: #0e7ac2;
		}
		a:hover {
			text-decoration: underline;
		}
		div#wrapper {
			width: 600px;
			margin: 0 auto;
			text-align: center;
			padding: 20px 0 40px 0;
		}
		iframe {
			border: 1px solid #ddd;
		}
	</style>
	
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript">
		$(function(){
		
			$("#test").click(function(){
				$.ajax({
					url: "imagedragger.js",
					success: function(data){}
				});
				return false;
			});
			
		});
	</script>
	
</head>

<body>

	<div id="wrapper">
		<h1>Super Image Dragger</h1>	
		<iframe frameborder="0" src="imagedragger.js" width="600" height="500" id="draggercode"></iframe>
		<br />
		<br />
		<a href="#" id="test">Test</a>
		<br />
		<br />
		Drag to your bookmarks:
		<a href='javascript:(function(){var a={obj:null,init:function(b,c,d,e,f,g,h,i,j,k){b.onmousedown=a.start;b.hmode=h?false:true;b.vmode=i?false:true;b.root=c&&c!=null?c:b;if(b.hmode&&isNaN(parseInt(b.root.style.left)))b.root.style.left="0px";if(b.vmode&&isNaN(parseInt(b.root.style.top)))b.root.style.top="0px";if(!b.hmode&&isNaN(parseInt(b.root.style.right)))b.root.style.right="0px";if(!b.vmode&&isNaN(parseInt(b.root.style.bottom)))b.root.style.bottom="0px";b.minX=typeof d!="undefined"?d:null;b.minY=typeof f!="undefined"?f:null;b.maxX=typeof e!="undefined"?e:null;b.maxY=typeof g!="undefined"?g:null;b.xMapper=j?j:null;b.yMapper=k?k:null;b.root.onDragStart=new Function;b.root.onDragEnd=new Function;b.root.onDrag=new Function},start:function(b){var c=a.obj=this;b=a.fixE(b);var d=parseInt(c.vmode?c.root.style.top:c.root.style.bottom);var e=parseInt(c.hmode?c.root.style.left:c.root.style.right);c.root.onDragStart(e,d);c.lastMouseX=b.clientX;c.lastMouseY=b.clientY;if(c.hmode){if(c.minX!=null)c.minMouseX=b.clientX-e+c.minX;if(c.maxX!=null)c.maxMouseX=c.minMouseX+c.maxX-c.minX}else{if(c.minX!=null)c.maxMouseX=-c.minX+b.clientX+e;if(c.maxX!=null)c.minMouseX=-c.maxX+b.clientX+e}if(c.vmode){if(c.minY!=null)c.minMouseY=b.clientY-d+c.minY;if(c.maxY!=null)c.maxMouseY=c.minMouseY+c.maxY-c.minY}else{if(c.minY!=null)c.maxMouseY=-c.minY+b.clientY+d;if(c.maxY!=null)c.minMouseY=-c.maxY+b.clientY+d}document.onmousemove=a.drag;document.onmouseup=a.end;return false},drag:function(b){b=a.fixE(b);var c=a.obj;var d=b.clientY;var e=b.clientX;var f=parseInt(c.vmode?c.root.style.top:c.root.style.bottom);var g=parseInt(c.hmode?c.root.style.left:c.root.style.right);var h,i;if(c.minX!=null)e=c.hmode?Math.max(e,c.minMouseX):Math.min(e,c.maxMouseX);if(c.maxX!=null)e=c.hmode?Math.min(e,c.maxMouseX):Math.max(e,c.minMouseX);if(c.minY!=null)d=c.vmode?Math.max(d,c.minMouseY):Math.min(d,c.maxMouseY);if(c.maxY!=null)d=c.vmode?Math.min(d,c.maxMouseY):Math.max(d,c.minMouseY);h=g+(e-c.lastMouseX)*(c.hmode?1:-1);i=f+(d-c.lastMouseY)*(c.vmode?1:-1);if(c.xMapper)h=c.xMapper(f);else if(c.yMapper)i=c.yMapper(g);a.obj.root.style[c.hmode?"left":"right"]=h+"px";a.obj.root.style[c.vmode?"top":"bottom"]=i+"px";a.obj.lastMouseX=e;a.obj.lastMouseY=d;a.obj.root.onDrag(h,i);return false},end:function(){document.onmousemove=null;document.onmouseup=null;a.obj.root.onDragEnd(parseInt(a.obj.root.style[a.obj.hmode?"left":"right"]),parseInt(a.obj.root.style[a.obj.vmode?"top":"bottom"]));a.obj=null},fixE:function(a){if(typeof a=="undefined")a=window.event;if(typeof a.screenX=="undefined")a.screenX=a.offsetX;if(typeof a.screenY=="undefined")a.screenY=a.offsetY;return a}};var b=prompt("Enter image url");if(document.getElementById("super_image_dragger")){var c=document.getElementById("super_image_dragger");c.style.display="none";c.setAttribute("src",b);setTimeout(function(){var a=window.innerWidth/2-c.width/2;c.style.left=a+"px";c.style.top="100px";c.style.display="block"},500)}else{var d=document.createElement("img");d.setAttribute("id","super_image_dragger");d.setAttribute("style","position:absolute;cursor:move;z-index:10000;top:100px;");d.setAttribute("src",b);document.body.appendChild(d);var c=document.getElementById("super_image_dragger");c.style.display="none";setTimeout(function(){var b=window.innerWidth/2-c.width/2;c.style.left=b+"px";c.style.display="block";a.init(c)},500)}})()'>Image dragger</a>
	</div>

</body>
</html>

